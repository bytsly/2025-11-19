# GUI窗口模式使用说明

## 概述

本系统已升级为GUI窗口模式，提供友好的图形界面，无需手动操作命令行。

## 功能特点

### 1. 图形化控制面板
- ✅ 无黑色终端窗口
- ✅ 直观的按钮操作
- ✅ 实时显示运行状态
- ✅ 一键启动/停止服务

### 2. 快速访问功能
- 🏠 **打开首页** - 一键打开系统首页
- ⚙ **管理后台** - 直接访问管理界面
- 📊 **投票页面** - 快速进入投票功能
- 🎰 **抽奖页面** - 快速进入抽奖功能

### 3. 日志管理
- 📝 实时显示运行日志
- 🔍 彩色日志分级（INFO/SUCCESS/WARNING/ERROR）
- 💾 支持日志导出
- 🗑️ 一键清空日志

## 开发环境使用

### 方式1：使用启动脚本（推荐）
```batch
双击运行：启动GUI.bat
```

### 方式2：命令行启动
```batch
# 激活虚拟环境
venv\Scripts\activate

# 启动GUI程序
python gui_app.py
```

## 生产环境使用

### 打包为EXE

1. **使用批处理脚本打包**（推荐）
   ```batch
   双击运行：打包exe.bat
   ```

2. **使用PowerShell脚本打包**
   ```powershell
   .\打包exe.ps1
   ```

### 打包后的使用

1. 进入 `dist\投票抽奖系统` 目录
2. 双击运行 `投票抽奖系统.exe`
3. GUI窗口自动打开
4. 点击"启动服务"按钮
5. 点击对应按钮访问各功能页面

## 界面说明

### 系统信息区域
- **系统名称**：显示当前系统名称
- **服务器地址**：显示本地和局域网访问地址
- **运行状态**：实时显示服务运行状态
  - 🔴 已停止
  - 🟢 运行中

### 控制面板
第一排按钮：
- **▶ 启动服务**：启动Web服务器
- **■ 停止服务**：停止Web服务器
- **↻ 重启服务**：重启Web服务器

第二排按钮：
- **🏠 打开首页**：在浏览器打开系统首页
- **⚙ 管理后台**：在浏览器打开管理后台
- **📊 投票页面**：在浏览器打开投票页面
- **🎰 抽奖页面**：在浏览器打开抽奖页面

### 运行日志区域
- 实时显示系统运行日志
- 支持滚动查看历史日志
- 日志颜色分级：
  - 绿色：成功信息
  - 橙色：警告信息
  - 红色：错误信息
  - 黑色：普通信息

日志工具栏：
- **清空日志**：清除所有日志记录
- **导出日志**：将日志导出为txt文件

## 配置说明

### 修改端口
编辑项目根目录或exe目录下的 `.env` 文件：
```
PORT=5000  # 修改为其他端口，如8080
```

### 修改主机地址
```
HOST=0.0.0.0  # 0.0.0.0表示允许局域网访问
```

## 常见问题

### Q1: 启动后看不到GUI窗口？
**A**: 检查是否有杀毒软件拦截，或者查看任务栏是否有最小化窗口

### Q2: 点击启动服务没反应？
**A**: 查看日志区域的错误信息，通常是端口被占用，修改.env中的PORT配置

### Q3: 打开浏览器后无法访问？
**A**: 
1. 确保服务已启动（状态显示为"运行中"）
2. 检查防火墙设置
3. 尝试使用 http://127.0.0.1:5000 访问

### Q4: 如何查看局域网内其他设备？
**A**: 
1. 启动服务后，查看"服务器地址"中的局域网IP
2. 在其他设备浏览器输入该地址访问
3. 确保防火墙允许入站连接

### Q5: 如何完全停止程序？
**A**: 
1. 如果服务在运行，先点击"停止服务"
2. 关闭GUI窗口
3. 系统会提示确认退出

### Q6: EXE文件太大？
**A**: 
- 这是正常的，因为打包了Python运行环境和所有依赖库
- 典型大小约300-500MB
- 可以压缩后分发

### Q7: 日志文件在哪里？
**A**: 
- 程序不会自动保存日志文件
- 如需保存，请使用"导出日志"功能

## 技术细节

### GUI框架
- 使用Python内置的 `tkinter` 库
- 无需额外安装依赖
- 跨平台支持（Windows/Linux/macOS）

### 线程模型
- 主线程：运行GUI界面
- 服务线程：运行Flask + SocketIO服务器
- 确保界面操作不会阻塞服务运行

### 打包配置
- 使用 PyInstaller
- `console=False` - 不显示控制台窗口
- 打包所有依赖和前端文件
- 生成单个文件夹形式的发行版

## 对比终端模式

| 特性 | 终端模式 | GUI模式 |
|------|---------|---------|
| 启动方式 | 运行run.py | 运行gui_app.py |
| 界面 | 黑色命令行窗口 | 图形化窗口 |
| 操作方式 | Ctrl+C停止 | 按钮控制 |
| 日志查看 | 终端输出 | 滚动文本框 |
| 浏览器打开 | 手动输入网址 | 一键打开 |
| 用户体验 | 需要技术背景 | 适合所有用户 |

## 升级路线

### 当前版本：v1.0
- ✅ 基础GUI界面
- ✅ 服务控制功能
- ✅ 日志显示和导出
- ✅ 快速访问按钮

### 未来计划：v2.0
- ⏳ 系统托盘最小化
- ⏳ 配置可视化编辑
- ⏳ 主题切换（深色/浅色）
- ⏳ 系统状态监控（CPU/内存）
- ⏳ 自动更新检查

## 反馈和支持

如有问题或建议，请通过以下方式反馈：
- 查看 README.md 了解更多功能
- 查看日志文件排查问题
- 联系技术支持

---

**享受GUI窗口模式带来的便捷体验！** 🎉
